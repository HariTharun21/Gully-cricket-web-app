{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gully Cricket</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Select2 CSS with Bootstrap Theme -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" rel="stylesheet" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>

<!-- Header -->
{% block header %}
<nav class="navbar navbar-expand-lg navbar-dark bg-success px-3">
  <a class="navbar-brand d-flex align-items-center" href="{% url 'home' %}">
    <img src="{% static 'images/bat-icon.jpg' %}" alt="Bat Icon" width="30" class="me-2">
    <span class="fs-4">Gully Cricket</span>
  </a>

  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ms-auto d-flex align-items-center">
      <li class="nav-item me-2">
        <a class="btn btn-light" href="{% url 'home' %}">üè† Home</a>
      </li>
      <li class="nav-item me-2">
        <a class="btn btn-warning" href="{% url 'match_list' %}">Matches</a>
      </li>
      <li class="nav-item me-2">
        <a class="btn btn-primary" href="{% url 'team_list' %}">Teams</a>
      </li>
      <li class="nav-item me-2">
        <a class="btn btn-info" href="{% url 'player_list' %}">Players</a>
      </li>
      {% if user.is_authenticated %}
        <li class="nav-item ms-3">
          <span class="navbar-text text-light">
            Welcome, {{ user.username }}!
          </span>
        </li>
        <li class="nav-item ms-2">
          <!-- Logout POST Form -->
          <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Logout</button>
          </form>
        </li>
      {% else %}
        <li class="nav-item ms-3">
          <a class="btn btn-secondary" href="{% url 'login' %}">Login</a>
        </li>
      {% endif %}
    </ul>
  </div>
</nav>
{% endblock %}

<!-- Hero Section (only appears if a child template overrides it) -->
<!-- Hero Section Block --> 
 {% block hero %} 
 <section class="text-center bg-light py-5"> 
  <div class="container"> 
    <img src="{% static 'images/cricket-banner.png' %}" class="img-fluid rounded shadow mb-4" alt="Cricket Banner">
     <blockquote class="blockquote"> 
      <p class="mb-0">"Cricket is not just a game, it's a way of life in the gullies."</p> 
    </blockquote> 
    <p class="lead mt-3">Welcome to Gully Cricket Score Tracker ‚Äî record every run, ball, and moment like the pros!</p> 
  </div> 
</section> 
{% endblock %}
<!-- Main Content -->
<div class="container py-4">
  {% block content %}{% endblock %}
</div>

<!-- Make a Match Button (optional block) -->

{% block make_match %} 
<div class="container text-end my-4">
   <a href="{% url 'match_create' %}" class="btn btn-success btn-lg shadow"> ‚ûï Make a Match </a>
   </div> 
   {% endblock %}

<!-- Footer -->
{% block footer %}
<footer class="bg-dark text-light text-center py-3 mt-5">
  <p class="mb-0">¬© 2025 Gully Cricket. All Rights Reserved.</p>
</footer>
{% endblock %}

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<!-- Select2 Init -->
<script>
  $(document).ready(function () {
    $('#id_players').select2({
      theme: 'bootstrap-5',
      placeholder: "Select players",
      closeOnSelect: false,
      width: '100%',
      templateResult: function (data) {
        if (!data.id) return data.text;
        let $result = $('<span><input type="checkbox" style="margin-right: 8px;" />' + data.text + '</span>');
        return $result;
      },
      templateSelection: function (data) {
        return data.text;
      }
    });

    $('#id_players').on('select2:select select2:unselect', function () {
      setTimeout(function () {
        $('.select2-results__option').each(function () {
          const checkbox = $(this).find('input[type="checkbox"]');
          if (checkbox.length) {
            checkbox.prop('checked', $(this).attr('aria-selected') === 'true');
          }
        });
      }, 50);
    });
  });
</script>
</body>
</html>
